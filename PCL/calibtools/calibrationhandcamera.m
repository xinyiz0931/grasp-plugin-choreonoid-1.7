system("rm calibmat.txt");

Ppalm =  [0.4169594 -0.319764 1.3136]';

Rpalm = [-0.160917 0.456858 -0.874864;
         -0.166098 0.861238 0.480293;
         0.972891 0.2226 -0.0627046];

# original
Pm = [0.548 0.082     0.7675;
      0.498 0.085     0.7675;
      0.545 0.042     0.7675;
      0.525 -0.175     0.7675]';

# camera
kPm = [-0.284414 0.0975739 0.606432;
        -0.2753 0.13972 0.599557;
       -0.281707 0.0954482 0.607353;
        0.0324427 0.0604436 0.563291]';

for i=1:4
		Pm(:,i) = Rpalm' * (Pm(:,i) - Ppalm);
end

[t,R] = callSVD(Pm,kPm);

Pm = [0.548 0.082     0.7675;
      0.498 0.085     0.7675;
      0.545 0.042     0.7675;
      0.525 -0.175     0.7675]';

kPm = [0.5476 0.091 0.7677;
       0.499 0.0913 0.7683;
       0.547 0.0501 0.768887;
        0.534 -0.167 0.7791]';

for i=1:4
		kPm(:,i) = Rpalm' * (kPm(:,i) - Ppalm);
		Pm(:,i) = Rpalm' * (Pm(:,i) - Ppalm);
end

[t,R] = callSVD(Pm,kPm);

Pm = [0 0 0;
      1 0 0;
      0 1 0;
      0 0 1]';

kPm = [0 0 0;
      1 0 0;
      0 1 0;
      0 0 1]';

for i=1:4
		kPm(:,i) = Rpalm' * (kPm(:,i) - Ppalm);
		Pm(:,i) = Rpalm' * (Pm(:,i) - Ppalm);
end

[t,R] = callSVD(Pm,kPm);

